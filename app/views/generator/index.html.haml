- @title = "Generator"
- @short_title = :generator

.row
  .col-md-10.col-md-offset-1
    - if GENERATOR_DISABLED
      .alert.alert-danger
        %strong Whoops!
        The generator is currently offline. Pardon our dust.
    - else
      %form#generate-form{data: {generator_url: GENERATOR_URL, save_url: save_url, reconstruct_phrase: params[:reconstruct_phrase], reconstruct_sources: params[:reconstruct_sources], age: ENV["GENERATOR_AGE"].presence || 45, count: ENV["GENERATOR_COUNT"].presence || 35, max_length: ENV["GENERATOR_MAX_LENGTH"].presence || 120, disallowed_words: DISALLOWED_WORDS}}
        .generate-button-wrapper{style: "display:none"}
          %a.generate-button.btn.btn-primary.btn-lg.btn-block
            %i.fa.fa-refresh.fa-spin
            %span.enabled-title Smash Hilarious Headlines
            %span.disabled-title Smashing Headlines
        .alert.alert-warning.hidden{style: 'margin-top: 10px'}
          %strong Couldn't Smash Headlines
          .swamp We might be getting swamped, try again!
        -# / %a.btn.btn-link.btn-block#collapse-generate-options{data: {toggle: :collapse, target: "#generate-form .source-box"}, style: "margin:10px 0"}
        -# /   %i.fa.fa-gear
        -# /   Pick Sources
        -# / .source-box.collapse
        -# /   - generator_sources.each do |category_name, sources|
        -# /     .source-category{id: "source-category-#{category_name.parameterize}"}
        -# /       %h5
        -# /         %a.toggler{data: {toggle: :collapse, target: "#source-category-#{category_name.parameterize} .sources"}, href: '#'}
        -# /           %i.fa.fa-fw.fa-caret-right
        -# /           #{category_name}
        -# /         .pull-right
        -# /           %input.group-check-box{type: :checkbox, indeterminate: true}
        -# /       .sources.collapse
        -# /         - sources.sort{|a,b| a.name.downcase <=> b.name.downcase}.each do |source|
        -# /           %span.source-checkbox-block
        -# /             = check_box_tag source.id, 1, selected_sources_includes?(source), class: 'source-check-box'
        -# /             = label_tag source.id do
        -# /               = source_image_tag source
        -# /               = source.name
        -# /   .form-group
        -# /     .text-center
        -# /       %a.btn.btn-xs.btn-link.link-muted#select-all Select All
        -# /       %a.btn.btn-xs.btn-link.link-muted#select-none Select None
        -# / .form-group.seed-word-area{style: "display:none"}
        -# /   %input.input-sm.form-control{type: :text, placeholder: "Seed Word", name: :seed_word, id: "seed-word-input"}

    - unless user_signed_in?
      #generator-sign-in-ask.well
        %button.btn.btn-warning.pull-right{data:{toggle: 'modal', target: '#modal-login-form'}}
          Make a Free Account
        %h4
          :erb
            <span class='text-success'>Save Headlines</span>, <span class='text-info'>Vote</span>, and <span class='text-warning'>Earn Karma</span>!
        %p Free! Fun! No email address or personal information required.

    #generated-headlines
      .well.text-center.text-muted
        %i.fa-3x.fa.fa-gear.fa-spin
        %h6 PLEASE HOLD
        %h4 Computers Are Creating Comedy...

    - unless GENERATOR_DISABLED
      .generate-button-wrapper{style: "display:none"}
        %a.generate-button.btn.btn-primary.btn-lg.btn-block
          %i.fa.fa-refresh.fa-spin
          %span.enabled-title Smash Hilarious Headlines
          %span.disabled-title Smashing Headlines

    .text-muted
      %p
        These headlines are generated by rearranging the words from real headlines from around the web.
      %p
        If one's especially good, save it #{link_to "to be voted on", root_path} and earn karma!
