- @title = "Generator"
- @short_title = :generator

.row
  .col-md-4
    - if GENERATOR_DISABLED
      .alert.alert-danger
        %strong Whoops!
        The generator is currently offline. Pardon our dust.
    - else
      %form#generate-form{data: {generator_url: GENERATOR_URL, save_url: save_url}}
        %a#invent-button.btn.btn-primary.btn-lg
          %i.fa.fa-refresh.fa-spin
          %span.enabled-title Generate Hilarious Headlines
          %span.disabled-title Generating Headlines
        .alert.alert-warning.hidden{style: 'margin-top: 10px'}
          %strong Couldn't Generate Headlines
          .swamp We might be getting swamped, try again!
        %a.btn.btn-link.btn-block#collapse-generate-options{data: {toggle: :collapse, target: "#generate-form .source-box"}, style: "margin:10px 0"}
          %i.fa.fa-gear
          Pick Sources
        .source-box.collapse
          - HeadlineSources::Source.categories.each do |category_name, sources|
            .source-category{id: "source-category-#{category_name.parameterize}"}
              %h5
                %a.toggler{data: {toggle: :collapse, target: "#source-category-#{category_name.parameterize} .sources"}, href: '#'}
                  %i.fa.fa-fw.fa-caret-right
                  #{category_name}
                .pull-right
                  %input.group-check-box{type: :checkbox, indeterminate: true}
              .sources.collapse
                - sources.each do |source|
                  %span.source-checkbox-block
                    = check_box_tag source.id, 1, selected_sources_includes?(source), class: 'source-check-box'
                    = label_tag source.id do
                      = source_image_tag source
                      = source.name
        .form-group.seed-word-area{style: "display:none"}
          %input.input-sm.form-control{type: :text, placeholder: "Seed Word", name: :seed_word, id: "seed-word-input"}
  .col-md-8

    #generated-headlines
      .well.text-center.text-muted.hidden-xs
        %i.fa-3x.fa.fa-refresh.fa-spin
        %h4 Generating Fake Headlines

    .text-muted
      %p
        These headlines are generated by rearranging the words from real headlines from around the web.
      %p
        If one's especially good, save it #{link_to "to be voted on", best_url} and earn karma!
